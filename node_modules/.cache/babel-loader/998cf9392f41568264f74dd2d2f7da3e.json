{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/matteo/code/bookit/src/components/TodoLike.js\";\n\nimport React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport { TODO_LIKE, GET_TODOS } from \"../queries\";\n\nvar TodoLike = function TodoLike(_ref) {\n  var id = _ref.id,\n      likes = _ref.likes;\n  return /*#__PURE__*/React.createElement(Mutation, {\n    mutation: TODO_LIKE,\n    update: function update(cache, _ref2) {\n      var likeTodo = _ref2.data.likeTodo;\n      var data = cache.readQuery({\n        query: GET_TODOS\n      });\n      data.todos.forEach(function (todo) {\n        if (todo.id === id) {\n          todo.likes = likeTodo.likes;\n        }\n      });\n      cache.writeQuery({\n        query: GET_TODOS,\n        data: data\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 5\n    }\n  }, function (likeTodo) {\n    return /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-heart has-text-danger\",\n      onClick: function onClick() {\n        likeTodo({\n          variables: {\n            id: id\n          },\n          optimisticResponse: {\n            __typename: \"Mutation\",\n            likeTodo: {\n              id: id,\n              __typename: \"Todo\",\n              likes: likes + 1\n            }\n          }\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 11\n      }\n    });\n  });\n};\n\nexport default TodoLike;","map":{"version":3,"sources":["/home/matteo/code/bookit/src/components/TodoLike.js"],"names":["React","Mutation","TODO_LIKE","GET_TODOS","TodoLike","id","likes","cache","likeTodo","data","readQuery","query","todos","forEach","todo","writeQuery","variables","optimisticResponse","__typename"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,YAArC;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAAmB;AAAA,MAAhBC,EAAgB,QAAhBA,EAAgB;AAAA,MAAZC,KAAY,QAAZA,KAAY;AAClC,sBACE,oBAAC,QAAD;AACE,IAAA,QAAQ,EAAEJ,SADZ;AAEE,IAAA,MAAM,EAAE,gBAACK,KAAD,SAAmC;AAAA,UAAjBC,QAAiB,SAAzBC,IAAyB,CAAjBD,QAAiB;AACzC,UAAMC,IAAI,GAAGF,KAAK,CAACG,SAAN,CAAgB;AAAEC,QAAAA,KAAK,EAAER;AAAT,OAAhB,CAAb;AACAM,MAAAA,IAAI,CAACG,KAAL,CAAWC,OAAX,CAAmB,UAAAC,IAAI,EAAI;AACzB,YAAIA,IAAI,CAACT,EAAL,KAAYA,EAAhB,EAAoB;AAClBS,UAAAA,IAAI,CAACR,KAAL,GAAaE,QAAQ,CAACF,KAAtB;AACD;AACF,OAJD;AAKAC,MAAAA,KAAK,CAACQ,UAAN,CAAiB;AACfJ,QAAAA,KAAK,EAAER,SADQ;AAEfM,QAAAA,IAAI,EAAJA;AAFe,OAAjB;AAID,KAbH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAeG,UAAAD,QAAQ,EAAI;AACX,wBACE;AACE,MAAA,SAAS,EAAC,8BADZ;AAEE,MAAA,OAAO,EAAE,mBAAM;AACbA,QAAAA,QAAQ,CAAC;AACPQ,UAAAA,SAAS,EAAE;AAAEX,YAAAA,EAAE,EAAFA;AAAF,WADJ;AAEPY,UAAAA,kBAAkB,EAAE;AAClBC,YAAAA,UAAU,EAAE,UADM;AAElBV,YAAAA,QAAQ,EAAE;AACRH,cAAAA,EAAE,EAAFA,EADQ;AAERa,cAAAA,UAAU,EAAE,MAFJ;AAGRZ,cAAAA,KAAK,EAAEA,KAAK,GAAG;AAHP;AAFQ;AAFb,SAAD,CAAR;AAWD,OAdH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAkBD,GAlCH,CADF;AAsCD,CAvCD;;AAyCA,eAAeF,QAAf","sourcesContent":["import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport { TODO_LIKE, GET_TODOS } from \"../queries\";\n\nconst TodoLike = ({ id, likes }) => {\n  return (\n    <Mutation\n      mutation={TODO_LIKE}\n      update={(cache, { data: { likeTodo } }) => {\n        const data = cache.readQuery({ query: GET_TODOS });\n        data.todos.forEach(todo => {\n          if (todo.id === id) {\n            todo.likes = likeTodo.likes;\n          }\n        });\n        cache.writeQuery({\n          query: GET_TODOS,\n          data\n        });\n      }}\n    >\n      {likeTodo => {\n        return (\n          <i\n            className=\"fas fa-heart has-text-danger\"\n            onClick={() => {\n              likeTodo({\n                variables: { id },\n                optimisticResponse: {\n                  __typename: \"Mutation\",\n                  likeTodo: {\n                    id,\n                    __typename: \"Todo\",\n                    likes: likes + 1\n                  }\n                }\n              });\n            }}\n          />\n        );\n      }}\n    </Mutation>\n  );\n};\n\nexport default TodoLike;\n"]},"metadata":{},"sourceType":"module"}