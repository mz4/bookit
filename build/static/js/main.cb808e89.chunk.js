(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(79)},47:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);a(47);var n=a(82),r=a(1),o=a.n(r),c=a(35),i=a.n(c),l=a(44),u=a(7),m=a(81),s=function(){return o.a.createElement("nav",{className:"level"},o.a.createElement("ul",{className:"level-left"},o.a.createElement("li",{className:"level-item"},o.a.createElement(m.a,{to:"/"},"Home")),o.a.createElement("li",{className:"level-item"},o.a.createElement(m.a,{to:"/bookmarks/new"},"Create"))))},d=function(e){var t=e.children;return o.a.createElement("div",{className:"container"},o.a.createElement(s,null),t)},k=a(45),f=a(11),E=a(32),b=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).classList,t=Object(r.useState)(null),a=Object(f.a)(t,2),n=a[0];return[a[1],function(t){var a,r;n.disabled=t,t?(a=n.classList).add.apply(a,Object(E.a)(e)):(r=n.classList).remove.apply(r,Object(E.a)(e))}]},p=a(13),v=a(10),h=a.n(v);function N(){var e=Object(p.a)(["\n  mutation UpdateBookmark($id: ID!, $content: String!) {\n    updateBookmark(id: $id, content: $content) {\n      id\n    }\n  }\n"]);return N=function(){return e},e}function y(){var e=Object(p.a)(["\n  mutation BookmarkLike($id: ID) {\n    likeBookmark(id: $id) {\n      id\n      likes\n    }\n  }\n"]);return y=function(){return e},e}function g(){var e=Object(p.a)(["\n  query Bookmark($id: ID!) {\n    bookmark(id: $id) {\n      id\n      content\n      likes\n    }\n  }\n"]);return g=function(){return e},e}function j(){var e=Object(p.a)(["\n  mutation DeleteBookmark($ID: ID) {\n    deleteBookmark(id: $ID) {\n      id\n    }\n  }\n"]);return j=function(){return e},e}function O(){var e=Object(p.a)(["\n  {\n    bookmarks {\n      id\n      content\n      likes\n    }\n  }\n"]);return O=function(){return e},e}function B(){var e=Object(p.a)(["\n  mutation AddBookmark($content: String!) {\n    addBookmark(content: $content) {\n      id\n      content\n    }\n  }\n"]);return B=function(){return e},e}var w=h()(B()),_=h()(O()),q=h()(j()),$=h()(g()),C=h()(y()),D=h()(N()),x=function(e){var t=b({classList:["is-loading","no-border"]}),a=Object(f.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),l=Object(f.a)(i,2),m=l[0],s=l[1];return o.a.createElement(u.Mutation,{mutation:w,update:function(e,t){var a=t.data.addBookmark;try{var n=e.readQuery({query:_}).bookmarks;e.writeQuery({query:_,data:{bookmarks:n.concat([Object(k.a)({},a,{likes:0})])}})}catch(r){}finally{c(!1)}}},function(e){return o.a.createElement("div",{className:"bookmark_form"},o.a.createElement("h4",{className:"bookmark_form__title"},"Add Bookmark"),o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),c(!0),e({variables:{content:m}}),s("")}},o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control"},o.a.createElement("input",{autoCorrect:"false",autoCapitalize:"false",className:"input",type:"text",onChange:function(e){return s(e.target.value)}}))),o.a.createElement("button",{className:"button is-light",type:"submit",ref:n},"Create")))})},Q=function(){return o.a.createElement("a",{className:"button is-loading"},"Loading")},I=function(e){var t=e.bookmark,a=b({classList:["is-loading","no-border"]}),n=Object(f.a)(a,2),c=n[0],i=n[1],l=Object(r.useState)(""),m=Object(f.a)(l,2),s=m[0],d=m[1];return o.a.createElement(u.Query,{query:$,variables:{id:t.id}},function(e){var t=e.loading,a=e.error,n=e.data.bookmark;return t?o.a.createElement(Q,null):a?"Error!: ".concat(a):o.a.createElement(u.Mutation,{mutation:D,refetchQueries:[{query:_}],update:function(){return i(!1)}},function(e){return o.a.createElement("div",{className:"bookmark_form"},o.a.createElement("h4",{className:"bookmark_form__title"},"Update Bookmark"),o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e({variables:{id:n.id,content:s}}),i(!0),n.content=s,d("")}},o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control"},o.a.createElement("input",{autoCorrect:"false",autoCapitalize:"false",className:"input",type:"text",placeholder:n.content,onChange:function(e){return d(e.target.value)}}))),o.a.createElement("button",{className:"button is-light",ref:c,type:"submit"},"Update Bookmark")))})})},L=function(e){var t=e.id;return o.a.createElement(u.Mutation,{mutation:q,update:function(e,a){a.data.deleteBookmark;var n=e.readQuery({query:_}).bookmarks;e.writeQuery({query:_,data:{bookmarks:n.filter(function(e){return e.id!==t})}})}},function(e){return o.a.createElement("i",{className:"delete",onClick:function(a){a.target.classList.add("button","is-loading","no-border"),e({variables:{ID:t}})}},"delete")})},S=function(e){var t=e.id,a=e.likes;return o.a.createElement(u.Mutation,{mutation:C,update:function(e,a){var n=a.data.likeBookmark,r=e.readQuery({query:_});r.bookmarks.forEach(function(e){e.id===t&&(e.likes=n.likes)}),e.writeQuery({query:_,data:r})}},function(e){return o.a.createElement("i",{className:"fas fa-heart has-text-danger",onClick:function(){e({variables:{id:t},optimisticResponse:{__typename:"Mutation",likeBookmark:{id:t,__typename:"Bookmark",likes:a+1}}})}})})},M=function(e){var t=e.id,a=e.likes,n=e.content,r=e.onUpdate;return o.a.createElement("div",{className:"card"},o.a.createElement("header",{className:"card-header"},o.a.createElement("p",{className:"card-header-title"},"Bookmark")),o.a.createElement("div",{className:"card-content"},o.a.createElement("div",{className:"content"},n)),o.a.createElement("footer",{className:"card-footer"},o.a.createElement("div",{className:"card-footer-item"},o.a.createElement("span",{className:"card__likes"}," ",a," \xa0"),o.a.createElement(S,{id:t,likes:a})),o.a.createElement("a",{href:"#",className:"card-footer-item"},o.a.createElement("i",{className:"fas fa-edit",onClick:function(e){e.preventDefault(),r(t)}})),o.a.createElement("a",{href:"#",className:"card-footer-item "},o.a.createElement(L,{id:t}))))},U=function(e){return o.a.createElement(u.Query,{query:_},function(t){var a=t.loading,n=t.error,r=t.data;if(a)return o.a.createElement(Q,null);if(n)return"Error! ".concat(n.message);var c=r.bookmarks;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"cards"},c&&c.map(function(t){return o.a.createElement(M,Object.assign({key:t.id},t,{onUpdate:function(t){e.history.push("/bookmark/".concat(t))}}))})),o.a.createElement(m.a,{to:"/bookmarks/new"},o.a.createElement("i",{className:"fas fa-plus-circle fa-2x has-text-success",style:{float:"right"}})))})},A=a(84),z=a(83),F=function(){return o.a.createElement(A.a,null,o.a.createElement(d,null,o.a.createElement(z.a,{exact:!0,path:"/",component:U}),o.a.createElement(z.a,{exact:!0,path:"/bookmarks/new",component:x}),o.a.createElement(z.a,{exact:!0,path:"/bookmark/:id",render:function(e){return o.a.createElement(I,{bookmark:{id:e.match.params.id}})}})))},J=new n.a({dataIdFromObject:function(e){return e.id||null}}),H=new l.a({cache:J,uri:"https://apollo-graphql-todo.glitch.me/graphql"}),P=function(){return o.a.createElement(u.ApolloProvider,{client:H},o.a.createElement(F,null))};i.a.render(o.a.createElement(P,null),document.querySelector("#root"))}},[[46,2,1]]]);
//# sourceMappingURL=main.cb808e89.chunk.js.map